DECLARE
    CURSOR numara_cursor IS
        SELECT numara FROM numaralar_tablosu ORDER BY numara;
    
    v_numara   numaralar_tablosu.numara%TYPE;
    v_cursor   SYS_REFCURSOR;
    v_adet     NUMBER;
    v_bulundu  BOOLEAN := FALSE;
BEGIN
    FOR rec IN numara_cursor LOOP
        v_numara := rec.numara;

        -- Prosedürü çağır
        get_bilgiler(p_numara => v_numara, p_cursor => v_cursor);

        -- Cursor'dan veri oku
        FETCH v_cursor INTO v_adet;
        CLOSE v_cursor;

        DBMS_OUTPUT.PUT_LINE('Denendi: ' || v_numara || ', Adet: ' || v_adet);

        -- Şartı kontrol et
        IF v_adet <= 0 THEN
            DBMS_OUTPUT.PUT_LINE('Uygun numara bulundu: ' || v_numara);
            v_bulundu := TRUE;
            EXIT;
        END IF;
    END LOOP;

    IF NOT v_bulundu THEN
        DBMS_OUTPUT.PUT_LINE('Uygun numara bulunamadı.');
    END IF;
END;
